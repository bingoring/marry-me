<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Will you marry me?</title>
  <meta name="language" content="ko">
  <meta name="title" content="love letter">
  <meta name="github" content="https://github.com/woorim960/love-letters-collection">
  <meta name="describe" content="우리밋,고백,프로포즈,propose,code">
  <link rel="icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/sun0225SUN/photos/img/20210715233345.png">
  <link type="text/css" rel="stylesheet" href="css/theme.css" />
  <script src="js/jquery-2.0.3.min.js"></script>
</head>

<body>
  <div id="div_container">
    <!-- 가장 바깥쪽 div, 중앙 호환 PC 및 모바일용 -->
    <div id="div_start_bg"></div>
    <div id="div_onlyyou">
      <!-- 배경 설정 -->
      <div id="div_oy_inner">
        <!-- 컨텐츠 저장에 사용 -->
        <div class="div_oy_text">
          <h1></h1>
          <img class="img_oy_text" src="" />
          <p class="p_oy_text"></p>
          <div></div>

          <ul id="ul_oy_benefit">
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
            <li class="li_oy_benefit"></li>
          </ul>
        </div>
        <ul id="ul_oy_btn">

          <li onclick="oy_go_next()">Yes&nbsp;&nbsp;❤</li>
          <li onclick="oy_show_benefit()">No&nbsp;&nbsp;✖</li>
        </ul>
        <div id="div_oy_note" onclick="oy_hide_note()">
          <img src="images/please.png" alt="" /><br />Yes라고 해..
          <div id="div_oy_note_close">✖</div>
        </div>
        <div id="div_oy_yes">
          <img src="images/accept.png" alt="" /><br />나이스!!
        </div>
      </div>
    </div>
    <div class="div_pure_words">
      <div class="div_pure_words_bg">
        <div class="div_pure_words_height"></div>
      </div>
      <div class="div_pw_typed">
        <span id="span_pw_typed"></span>
      </div>
    </div>
    <div id="div_btn_container">
      <div id="div_btn_inner">

        <div class="div_music_tips"></div>
        <div class="div_btn" id="div_music" onclick="music_switch()">
          <!-- 음악 버튼 -->
          <img id="img_music" src="images/music_note_big.png"
            style="-webkit-animation: music_play_rotate 1s linear infinite;" />
          <!-- 브라우저에서 음악 재생을 지원하지 않습니다 -->
          <audio id="audio_music" autoplay="autoplay" loop="loop">
            <source type="audio/mpeg" />
          </audio>
        </div>
        <div class="div_record_tips"></div>
        <div class="div_btn" id="div_record" onclick="record_switch()">
          <audio id="audio_record" loop="loop">
            <source type="audio/mpeg" />
          </audio>
        </div>

      </div>

    </div>

  </div>


  <script>
    // 클라이언트 디바이스 판단, 메타데이터 쓰기
    function init_viewport() {
      if (navigator.userAgent.indexOf("Android") != -1) {
        var version = parseFloat(RegExp.$1);
        if (version > 2.3) {
          var width =
            window.outerWidth == 0 ? window.screen.width : window.outerWidth;
          var phoneScale = parseInt(width) / 500;
          document.write(
            '<meta name="viewport" content="width=500, minimum-scale = ' +
            phoneScale +
            ", maximum-scale = " +
            phoneScale +
            ', target-densitydpi=device-dpi">'
          );
        } else {
          document.write(
            '<meta name="viewport" content="width=500, target-densitydpi=device-dpi, user-scalable=0">'
          );
        }
      } else if (navigator.userAgent.indexOf("iPhone") != -1) {
        var phoneScale = parseInt(window.screen.width) / 500;
        document.write(
          '<meta name="viewport" content="width=500, min-height=750, initial-scale=' +
          phoneScale +
          ", maximum-scale=" +
          phoneScale +
          ', user-scalable=0" /> '
        ); //0.75   0.82
      } else {
        document.write(
          '<meta name="viewport" content="width=500, height=750, initial-scale=0.64" /> '
        ); //0.75  0.82
      }
    }
    init_viewport();

    // 날짜 구하기
    var today = new Date();   

    var year = today.getFullYear(); // 년도
    var month = today.getMonth() + 1;  // 월
    var date = today.getDate();  // 날짜
    var day = today.getDay();  // 요일
    var hours = today.getHours(); // 시
    var minutes = today.getMinutes();  // 분
    var seconds = today.getSeconds();  // 초

    var theme = "pure_words";
    console.log("theme ->" + theme);
    var theme_content = {
      pure_words_content:
        `고마워，오늘 ${year}년 ${month}월 ${date}일 ${hours}시 ${minutes}분 ${seconds}초 부터 자기는 나의 아내가 되었어.<br>참고로 A/S는 가능한데, 반품은 불가능이야.<br>편지는 손글씨만 하다가 이렇게 타이핑을 하려니 어색하다.<br>뭔가 정성이 조금 부족한 느낌이라 더 깊게 고민하게 돼.<br>대부분의 사람들은 자신이 제일 중요하기에 어떤 맛있는 것을 보면 한개 사서 바로 먹는 삶을 살아가지만<br>우린 달랐어.<br>우린 맛있는 것을 보면 두개 사서 집에 가져와서 나눠먹어.<br>서로가 각자의 삶에서 가장 큰 부분을 차지하게 되며 서로가 가장 친한 친구이자 스승이자 소중한 연인이 되었고, 이제 우린 부부가 되려 해.<br>부부가 된다는 것은 사실 겉으로는 지금과 달라지는게 없을거야.<br>지금처럼 밥먹고, 일하며 산책하는 삶을 살아가겠지.<br>그러다 어느 순간 감정이 상하는 순간이 오면 우린 대화를 할 때 이 생각을 한번씩 더 하게 될거야.<br>우린 부부니까, 우린 영혼으로 묶여있으니까. 서로가 가장 소중한 존재니까 소중히 대하자.<br>가끔은 부부라는 사실을 잊고 살지 몰라.<br>나도 최근 자기에 대한 진정성이 줄었을지 몰라.<br>그 때마다 우린 지금까지보다 더 서로를 소중하게 대하고 말하자.<br>돈 많이 벌어서 드림카 사고 좋은 집으로 이사 가는 것을 목표로 하지 않고<br>퇴근하고 집으로 오는 길에 보이는 만두를 보며 내 손에 들린 만두를 보고 행복해할 자기와 현관에서 입맞추는 것을 목표로 살아갈게.<br><um style='color: #F44336;'>사랑해, 그리고 고마워❣️</um> - 자기의 남편 개발자 염연웅<br>`,
      typed_bool: "typed_y",
      cursor_char: "cursor_heart",
      bg_style_pure_words: "bg_opacity",
      bg_img: "images/3.jpg",
      simple_page_content: "",
      video_page_content: "",
    };
    console.log(theme_content);

    var music_json = {
      music_select: "m_online",
      m_online_id: "7",
      m_online_url: "images/Some Day My Prince Will Come.mp3",
      m_upload_name: "null",
      m_upload_url: "null",
    };
    console.log(music_json);
    var record_json = {
      record_bool: "r_false",
      r_wechat_time: "null",
      r_wechat_url: "null",
      r_wechat_amr: "null",
    };
    console.log(record_json);

    var main_title = "I Love You ❤️";

    // console.log(main_title);
    if (main_title == "" || main_title == "null") {
      // 제목이 빈 경우 아래 타이틀 삽입
      document.title = "I Love You ❤️";
    }

    var window_height = $(window).height();
    console.log("window_height ->" + window_height);
    var pure_words_content = theme_content["pure_words_content"];
    var str_cursorChar;
    var typed_bool;
    var interval_pw_height;
    var height_div_pw = $(".div_pure_words_height").height();

    function init_pure_words() {
      $(".div_pure_words_height").html(pure_words_content + "22222"); // 복사 내용을 초기화하고 문서 높이를 늘립니다
      // div의 bg 그림 초기화 설정
      if (
        typeof theme_content["bg_style_pure_words"] != "undefined" &&
        theme_content["bg_style_pure_words"] == "bg_opacity"
      ) {
        if (
          typeof theme_content["bg_img"] != "undefined" &&
          theme_content["bg_img"] != ""
        ) {
          $(".div_pure_words_bg").css({
            "background-image": "url(" + theme_content["bg_img"] + ")",
          });
        }
      }
      // 다음은 타이핑 효과의 js입니다.
      if (
        typeof theme_content["cursor_char"] != "undefined" &&
        theme_content["cursor_char"] != ""
      ) {
        switch (
        theme_content["cursor_char"] // 타이핑 커서 스타일 설정
        ) {
          case "cursor_heart":
            str_cursorChar = '<um style="color: #F44336;">❤</um>';
            break;
          case "cursor_sub":
            str_cursorChar = "_";
            break;
          case "cursor_music":
            str_cursorChar = "♫";
            break;
          case "cursor_star":
            str_cursorChar = "★";
            break;
          case "cursor_sun":
            str_cursorChar = "☀";
            break;
          default:
            str_cursorChar = "|";
        }
      } else {
        // 새로운 작품을 처리하고, 기본적으로 타이핑 효과를 표시합니다.
        str_cursorChar = "❤";
      }

      // 사용자가 타이핑 효과를 선택했는지 여부를 판단하다
      if (
        typeof theme_content["typed_bool"] != "undefined" &&
        theme_content["typed_bool"] != ""
      ) {
        typed_bool = theme_content["typed_bool"] == "typed_y" ? true : false;
      } else {
        typed_bool = false; // 기본적으로 타이핑 효과 보이기
      }

      display_pure_words();
      $(".div_pure_words").fadeIn();

      interval_pw_height = setInterval(function () {
        console.log(
          "div_pure_words_height -> " + $(".div_pure_words_height").height()
        );
        var least_height_div_pw = $(".div_pure_words_height").height();
        if (least_height_div_pw > height_div_pw) {
          height_div_pw = least_height_div_pw;
        } else {
          clearInterval(interval_pw_height);
          $(".div_pure_words_height").height(least_height_div_pw + 100);
          if ($(".div_pure_words_height").height() < window_height) {
            $(".div_pure_words_height").height(window_height); // 창 높이보다 작을 수 없음
            console.log("let us be high as window");
          }
        }
      }, 100);
    }

    function display_pure_words() {
      if (typed_bool) {
        var typed_pure_words = new Typed("#span_pw_typed", {
          strings: [pure_words_content], // 내용 입력, HTML 태그 지원
          typeSpeed: 120, // 타이핑 속도
          cursorChar: str_cursorChar, // 커서 스타일 바꾸기
          contentType: "html", // 값이 html일 경우 인쇄된 텍스트 라벨을 html 라벨로 직접 해석
          onComplete: function (abc) {
            // console.log(abc);
            console.log("finished typing words");
            // console.log($('#span_pw_typed').height()-$(".div_pure_words_height").height());
          },
        });
      } else {
        // 타이핑이 필요하지 않으면 바로 표시
        $("#span_pw_typed").html(pure_words_content).fadeIn();
      }
      init_attachment();
    }

    var start_content = {
      chase_title:
        "To. 수경❣️",
      chase_text:
        // "우리의 결혼을 이제 한달 앞뒀어.<br>멋지게 식당에서 편지와 목걸이를 건네는 것도 생각했는데<br>누구도 경험하지 못한 방식으로 프로포즈를 하고싶었어.💕<br>우리가 만난지 930일이 되어가.<br><br><um style='color: #F44336; font-weight: 300;'>나랑 사귀자!</um>",
        "남자답게 말할게.<br>정말 아무리 생각해도 내가 어떻게 자기를 만났는지 모르겠어.<br>우연에 우연이 겹쳐 만난 우린 운명이었고, 이 운명의 굴레에서 빠져나오기에 우린 너무 살쪘어.<br>내 위에는 자기가 만들어준 파스타가, 소장에는 볶음밥이, 대장에는 김치찌개가 있어.<br>자기 배에는 아마 만두, 용가리, 떡볶이가 있을것 같아💕<br>이렇듯 자기와 함께하는 나날이 너무 행복했어서<br>앞으로도 이 일상을 유지보수하고 싶어.<br>수많은 남자들 중 나를 만나 사귀게 된 것에 만족하며 살아왔다면<br>이제는 그 수많은 남자들 중 나와 결혼을 했다는 것에 뿌듯함을 느끼게 해줄게.<br>나와 새 버전의 인생(결혼생활)을 빌드 및 배포(시작)하자.<br><um style='color: #F44336; font-weight: 300;'>나와 결혼해줘</um><br>",
      chase_benefit: [
        "쓰레기 화, 목, 일요일마다 내다놓을게",
        "빨래도 매번 차곡차곡 개어놓을게",
        "뽈뽈이 산책도 시켜줄게!",
        "하체 운동도 빼먹지 않고 열심히 할게",
        "이렇게 해도 안넘어온다고?",
        "매일 어묵탕 해서 같이 먹을게",
        "잘때 항상 옆에서 토닥토닥 해줄게",
        "진짜 마지막으로 물어볼게",
        "<um style='color: #F44336;font-weight: 300;'>나와 결혼해줘</um>"
      ],
      bg_style: "bg_custom",
      bg_img: "images/background_2.jpeg",
      img_bool: "img_true",
      img_src: "images/kiss2.gif",
    }; // null일 수 있음
    console.log(start_content);
    var start_id;
    $(function () {
      // 이 이벤트는 인터랙티브한 아이디어를 촉발합니다
      start_id = "onlyyou"; // null일 수 있음
      init_start(start_id);
    });

    function init_start(start_id) {
      console.log("init_start ->" + start_id);
      switch (start_id) {
        case "loveformat":
          $(".div_loveformat").show();
          init_loveformat();
          break;
        case "hearttree":
          $("#div_hearttree").show();
          init_hearttree();
          break;
        case "courage":
          $("#div_courage").show();
          init_courage();
          break;
        case "birthdaycake":
          $("#div_dbcake").show();
          init_birthdaycake();
          break;
        case "intersect":
          $("#div_intersect").show();
          init_intersect();
          break;
        case "onlyyou":
          $("#div_onlyyou").show();
          init_onlyyou();
          break;
        default:
          init_theme();
      }
    }

    // 애니메이션 본체 시작
    function init_theme() {
      console.log("init_theme");

      // 날짜 구하기
      year = today.getFullYear(); // 년도
      month = today.getMonth() + 1;  // 월
      date = today.getDate();  // 날짜
      day = today.getDay();  // 요일
      hours = today.getHours(); // 시
      minutes = today.getMinutes();  // 분
      seconds = today.getSeconds();  // 초
      
      $("#div_start_bg").fadeOut();
      init_pure_words();
    }
    var attachment = "null"; // null일 수 있음
    var attached_content = {
      bool_save: false,
    }; // null일 수 있음
    console.log(attached_content);

    function init_attachment() {
      // attachment 시작
      console.log("init_attachment ->" + attachment);
      switch (attachment) {
        case "timer":
          init_at_timer();
          break;
        default:
          return;
      }
    }
  </script>

  <!-- JQuery -->
  <script src="js/typed.min.js"></script>
  <script src="js/start_onlyyou.js"></script>
  <script src="js/jweixin-1.2.0.js"></script>
  <script src="js/theme_common.js"></script>
</body>

</html>
